{% extends "base.html" %}
{% block title %}Lista de Divisas{% endblock %}
{% block body_class %}bg-gradient-to-br from-blue-50 to-blue-200 min-h-screen{% endblock %}
{% block header %}
    {% include "includes/header_admin.html" %}
{% endblock %}
{% block content %}
    <div class="container mx-auto px-4 py-8 flex-grow">
        <div class="flex flex-col md:flex-row justify-between items-start md:items-center mb-6">
            <h1 class="text-2xl font-bold text-blue-800">Lista de Divisas</h1>
            <button class="btn btn-primary"
                    onclick="document.getElementById('modal_crear_divisa').showModal()">
                <svg xmlns="http://www.w3.org/2000/svg"
                     class="h-5 w-5 mr-2"
                     fill="none"
                     viewBox="0 0 24 24"
                     stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4" />
                </svg>
                Crear Divisa
            </button>
        </div>

        <!-- Tabla de datos -->
        <div class="card bg-white shadow-xl overflow-auto rounded-xl">
            <div class="card-body p-6">
                <table class="w-full text-left">
                    <thead>
                        <tr>
                            <th class="bg-blue-100 px-4 py-2 font-semibold text-blue-800 rounded-tl-lg">Código</th>
                            <th class="bg-blue-100 px-4 py-2 font-semibold text-blue-800">Nombre</th>
                            <th class="bg-blue-100 px-4 py-2 font-semibold text-blue-800">Símbolo</th>
                            <th class="bg-blue-100 px-4 py-2 font-semibold text-blue-800 rounded-tr-lg text-center">Acciones</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% if divisas %}
                            {% for divisa in divisas %}
                                <tr class="hover:bg-gray-100 transition-colors duration-200 border-b border-gray-200">
                                    <td class="px-4 py-3">{{ divisa.codigo }}</td>
                                    <td class="px-4 py-3">{{ divisa.nombre }}</td>
                                    <td class="px-4 py-3">{{ divisa.simbolo }}</td>
                                    <td class="px-4 py-3 text-center">
                                        <a href="{% url 'operaciones:divisa_detail' divisa.pk %}"
                                           class="text-blue-600 hover:text-blue-900 mx-1">Ver</a>
                                        <a href="{% url 'operaciones:edit_divisa' divisa.pk %}"
                                           class="text-indigo-600 hover:text-indigo-900 mx-1">Editar</a>
                                        <a href="{% url 'operaciones:delete_divisa' divisa.pk %}"
                                           class="text-red-600 hover:text-red-900 mx-1">Eliminar</a>
                                    </td>
                                </tr>
                            {% endfor %}
                        {% else %}
                            <tr>
                                <td colspan="4"
                                    class="px-4 py-3 text-center text-gray-500 italic">No hay Divisas para mostrar.</td>
                            </tr>
                        {% endif %}
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <!-- Modal para crear nueva divisa -->
    <dialog id="modal_crear_divisa" class="modal">
        <div class="modal-box w-11/12 max-w-2xl p-6 bg-white rounded-xl shadow-xl">
            <form method="dialog">
                <button class="btn btn-sm btn-circle btn-ghost absolute right-2 top-2">✕</button>
            </form>
            <h3 class="text-2xl font-bold text-gray-800 mb-6">Crear Nueva Divisa</h3>
            <form id="crear-divisa-form"
                  method="post"
                  action="{% url 'operaciones:create_divisa' %}">
                {% csrf_token %}
                <div class="mb-4">
                    <label for="id_codigo" class="block text-gray-700 font-medium mb-2">Código:</label>
                    <input type="text"
                           name="codigo"
                           id="id_codigo"
                           required
                           maxlength="3"
                           class="w-full px-4 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500 transition-shadow">
                </div>
                <div class="mb-6">
                    <label for="id_nombre" class="block text-gray-700 font-medium mb-2">Nombre:</label>
                    <input type="text"
                           name="nombre"
                           id="id_nombre"
                           required
                           maxlength="50"
                           class="w-full px-4 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500 transition-shadow">
                </div>
                <div class="mb-6">
                    <label for="id_simbolo" class="block text-gray-700 font-medium mb-2">Símbolo:</label>
                    <input type="text"
                           name="simbolo"
                           id="id_simbolo"
                           required
                           maxlength="5"
                           class="w-full px-4 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500 transition-shadow">
                </div>
                <div class="flex justify-end space-x-2">
                    <button type="button"
                            class="px-6 py-2 bg-gray-200 text-gray-800 font-medium rounded-full hover:bg-gray-300 transition-colors duration-200 shadow-lg"
                            onclick="document.getElementById('modal_crear_divisa').close()">Cancelar</button>
                    <button type="submit"
                            class="px-6 py-2 bg-indigo-600 text-white font-medium rounded-full hover:bg-indigo-700 transition-colors duration-200 shadow-lg">
                        Guardar
                    </button>
                </div>
            </form>
        </div>
    </dialog>
{% endblock %}
